<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet/less" href="less/base.less">
    <link rel="stylesheet/less" href="less/index.less">
    <script src="lib/less/less.js"></script>
</head>

<body>
    <!-- 主体布局容器 -->
    <div id="layout">
        <!-- 顶部通栏 -->
        <header id="topbar">
            <i class="icon-logo"></i>
            <form action="#">
                <i class="icon-search"></i>
                <input type="text" placeholder="请输入">
            </form>
            <a href="#" class="login">登录</a>
        </header>
        <!-- 轮播图 -->
        <section id="slide">
            <ul class="clearfix">
                <li><a href="#"><img src="images/l8.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l1.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l2.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l3.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l4.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l5.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l6.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l7.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l8.jpg" alt=" "></a></li>
                <li><a href="#"><img src="images/l1.jpg" alt=" "></a></li>
            </ul>
            <ul class="clearfix">
                <li class="active"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </section>
        <!-- 导航条 -->
        <nav id="nav">
            <ul class="clearfix">
                <li>
                    <a href="#">
        					<img src="images/nav0.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav1.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav2.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav3.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav4.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav5.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav6.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
                <li>
                    <a href="#">
        					<img src="images/nav7.png" alt=" ">
        					<p>导航菜单</p>
        					</a>
                </li>
            </ul>
        </nav>
        <!-- 商品区域 -->
        <main id="products">
            <!-- 秒杀商品 -->
            <div class="seckill">
                <!-- 秒杀商品标题 -->
                <div class="seckill-title clearfix">
                    <div class="icon-seckill">
                        <img src="images/seckill-icon.png" alt="">
                    </div>
                    <div class="seckill-name">
                        掌上秒杀
                    </div>
                    <div class="seckill-downtime">
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                    </div>
                    <div class="seckill-more">
                        更多>
                    </div>
                </div>
                <!-- 秒杀商品内容 -->
                <div class="seckill-content">
                    <ul class="clearfix">
                        <li><a href="#">
        							<img src="images/detail01.jpg" alt="">
        							<p>￥10.00</p>
        							<p>￥10.00</p>
        						</a></li>
                        <li><a href="#">
        							<img src="images/detail01.jpg" alt="">
        							<p>￥10.00</p>
        							<p>￥10.00</p>
        						</a></li>
                        <li><a href="#">
        							<img src="images/detail01.jpg" alt="">
        							<p>￥10.00</p>
        							<p>￥10.00</p>
        						</a></li>
                    </ul>
                </div>
            </div>
            <!-- 京东超市 -->
            <div class="product">
            	<div class="product-title">
            		<h4>京东超市</h4>
            	</div>
            	<div class="product-content clearfix">
            		<div class="product-left">
            			<a href="#" class="br">
            				<img src="images/cp1.jpg" alt="">
            			</a>
            		</div>
            		<div class="product-right">
            			<a href="#" class="bb">
            				<img src="images/cp2.jpg" alt="">
            			</a>
            			<a href="#">
            				<img src="images/cp3.jpg" alt="">
            			</a>
            		</div>
            	</div>
            </div>
            <div class="product">
            	<div class="product-title">
            		<h4>京东超市</h4>
            	</div>
            	<div class="product-content clearfix">
            		<div class="product-left">            			
            			<a href="#" class="bb">
            				<img src="images/cp5.jpg" alt="">
            			</a>
            			<a href="#">
            				<img src="images/cp6.jpg" alt="">
            			</a>
            		</div>
            		<div class="product-right">
            			<a href="#" class="bl">
            				<img src="images/cp4.jpg" alt="">
            			</a>
            		</div>
            	</div>
            </div>
            <div class="product">
            	<div class="product-title">
            		<h4>京东超市</h4>
            	</div>
            	<div class="product-content clearfix">
            		<div class="product-left">
            			<a href="#" class="br">
            				<img src="images/cp1.jpg" alt="">
            			</a>
            		</div>
            		<div class="product-right">
            			<a href="#" class="bb">
            				<img src="images/cp2.jpg" alt="">
            			</a>
            			<a href="#">
            				<img src="images/cp3.jpg" alt="">
            			</a>
            		</div>
            	</div>
            </div>
        </main>
    </div>
    <script src="lib/zepto/zepto.min.js"></script>
    <script src="lib/zepto/selector.js"></script>
    <script src="lib/zepto/fx.js"></script>
    <script src="lib/zepto/touch.js"></script>
    <script>
    $(function () {
       /* 1. 需求：
            1. 实现轮播图无缝自动轮播
            2. 实现轮播图的左右滑动和预览图片
            3. 实现轮播滑动结束后判断切换到上一张和下一张和回弹
            4. 实现轮播图切换后小圆点也跟着变动
        2. 实现思路
            1. 实现自动无缝轮播
                1. 定义一个轮播的索引index=1
                2. 定义一个定时器每2秒走一次 每次index++
                3. 设置轮播图容器的偏移index*slideWidth 同时添加过渡
                4. 添加一个过渡完成事件判断当轮播图从第8张到第一张走完的时候切换到第一张的真实位置
                5. 同时清除过渡 设置位移到第一张的真实位置
            2. 实现轮播图的左右滑动切换图片
                1. 给轮播图容器添加滑动开始和滑动中事件
                2. 在滑动开始的事件里面记录滑动开始手指的位置
                3. 在滑动中的时候记录滑动中手指的位置
                4. 用滑动中手指的位置-滑动开始手指的位置 求得滑动的距离
                5. 将滑动距离作为偏移加上轮播图已经到达的位置 设置到轮播图容器上 同时清除过渡
            3. 实现轮播图滑动结束后判断滑动距离切换图片还是回弹
                1. 给轮播图容器添加滑动结束事件
                2. 判断distanceX的值有没有超过一张图的1/3
                3. 如果超过1/3再判断distanceX的值是正值还是负值
                4. 如果是正值 则表示从左往右滑 切换到上一张 index-- 设置位移设置过渡
                5. 如果是负值 则表示从右往左滑 切换到下一张 index++ 设置位移设置过渡
                6. 如果distanceX的值不超过一张图的1/3则回弹 index没有变化直接设置位移设置过渡
                7. 当轮播图从第1张往左滑动到第8张滑动完的时候要切换到第8张的真实位置
                8. 在过渡完成事件里面判断index<=0的时候index=8 清除过渡设置位移
                9. 同时在滑动结束后再次重新添加定时器*/
        var index = 1;
        var slide = $('#slide');
        var slideWidth = slide.width();
        var slideUl = $('#slide ul:eq(0)');
        var indicators = $('#slide ul:last-of-type li');
        var timer;
        function startTimer() {
            timer = setInterval(function () {
                index++;
                slideAnimate();
            },1000);
        }
        startTimer();
        function slideAnimate() {
            slideUl.animate({
                transform:"translateX("+(-index*slideWidth)+"px)"
            },200,'ease-in',function () {
                //动画执行完毕的回调函数就类似于之前学的过渡完成事件
                if(index >= 9){
                    index = 1;
                    slideUl.css('transform','translateX('+(-index*slideWidth)+'px)');
                }else if(index <= 0){
                    index = 8;
                    slideUl.css('transform','translateX('+(-index*slideWidth)+'px)');
                }
                indicators.removeClass('active').eq(index-1).addClass('active');
                // 确保时钟清除掉了再开启不然容易开启到多个时钟
                clearInterval(timer);
                startTimer();
            })
        }
        //从右往左滑会触发的事件
        slideUl.on('swipeLeft',function () {            
            clearInterval(timer);
            index++;
            slideAnimate();
        })
        //从右往左滑会触发的事件
        slideUl.on('swipeRight',function () {            
            clearInterval(timer);
            index--;
            slideAnimate();
        })
    })
    </script>
</body>

</html>